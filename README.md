به نام خدا

معرفی پروژه:
این پروژه مربوط به سامانه «هاویرکشت» است؛ سامانه‌ای برای کشاورزان کشت قراردادی چغندر قند که اطلاعات مالی و محصولی مثل وزن بار عیار درصد افت، قیمت تمام‌شده و… را شفاف و لحظه‌ای نمایش می‌دهد.


مرحله اول:


در این مرحله تعدادی از API های سمت سرور که در swagger  قرار داشتند بررسی شدند . همچنین نام API ، متد ، ادرس API ، متد ، ادرس API ، پارامتر ها ، ورودی (request body) و خروجی (response) در جدول بالا دسته بندی شده اند.



مرحله دوم :
در این مرحله پس از وارد  شدن به سامانه هاویر کشت ، در مرورگر edge)) inspect  میگیریم و در تب network ابتدا صفحه را refresh  میکنیم تا تمامی اطلاعات به ما نمایش داده شوند و سپس فیلتر را روی fetch/XHR  قرار میدهیم و صفحاتی که داده را چک میکنیم که هر صفحه کدام  API  را فراخوانی میکنند و سپسURL، Method، Query Params، Payload، Response، Status Code  را ثبت میکنیم.
(1
Request URL : https://edu.havirkesht.ir/DashBoard
Request Method: GET
Status Code: 304 Not Modified
Remote Address2.: 189.255.173:443
Referrer Policy: strict-origin-when-cross-origin

(2
Request URL: https://edu.havirkesht.ir/Year-registration
Request Method: GET
Status Code: 304 Not Modified
Remote Address: 2.189.255.173:443
Referrer Policy: strict-origin-when-cross-origin

3)
Request URL: https://edu.havirkesht.ir/SendSmsFarmer
Request Method:GET
Status Code: 304 Not Modified
Remote Address: 2.189.255.173:443
Referrer Policy: strict-origin-when-cross-origin


4)
Request URL: https://edu.havirkesht.ir/FactoryWaste
Request Method: GET
Status Code: 304 Not Modified
Remote Address:2.189.255.173:443
Referrer Policy: strict-origin-when-cross-origin

مرحله سوم:
 در این مرحله فرانت‌اند روی localhost اجرا و به API آموزشی متصل شد. تمرکز این مرحله روی “کارکرد واقعی” بود، یعنی داده‌ها از  API  دریافت شوند و عملیات‌ها واقعاً روی سرور انجام شوند .ثبت استان،ثبت سال زراعی، داشبورد وعملیات کشاورز با استفاده ازtailwindcss, js  پیاده سازی شده اند.و همچنین API های صفحه ورود ، ثبت استان ها و ثبت سال زراعی متصل شده اند.

اقدامات کلیدی انجام‌شده
1.	پیاده‌سازی Login واقعی با JWT
o	تشخیص endpoint صحیح لاگین: POST /token
o	ارسال داده‌ها با x-www-form-urlencoded
o	ذخیره access_token در localStorage
o	ارسال خودکار Authorization: Bearer <token> در درخواست‌های بعدی
2.	محافظت صفحات
o	در صورت نبود توکن، کاربر به صفحه ورود هدایت می‌شود.
o	خروج از حساب (Logout) با حذف توکن انجام می‌شود.



3.	اتصال صفحه ثبت استان به API 
o	endpoint: /province/
o	دریافت لیست استان‌ها از API و نمایش در جدول
o	ثبت استان جدید
o	حذف استان (با توجه به ساختار API، مسیر حذف با اسلش انتهایی تنظیم شد: /province/{id}/)
o	هماهنگ‌سازی نام فیلد واقعی استان با API: province
4.	اتصال صفحه ثبت سال زراعی به API 
o	endpoint: /crop-year/
o	دریافت لیست از response به شکل { items: [...] }
o	نمایش فیلد صحیح سال زراعی از API: crop_year_name
o	حذف با مسیر /crop-year/{id}/
o	انتخاب سال زراعی و نگهداری آن در localStorage برای استفاده در صفحات دیگر












•	در پوشه App.js  تنظیمات مربوط به فرانت اند پروژه قرار گرفته است که شامل تنظیمات تم صفحه ، نحوه عملکرد ساید بار ،ساید بار در موبایل و ایکون ها میباشد. 






















•	در پوشه ثبت استان و ثبت سال زراعی نیز APIهای مربوط به ان ها نوشته شده است.























•	در این قسمت endpoint ها گرفته شده اند و در پوشه api.js قرار داده شده اند.







مرحله چهارم:
طبق صورت پروژه لازم است خطاها به شکل مناسب به کاربر نمایش داده شوند. در این پروژه حداقل سناریوهای مهم بررسی و در طراحی لحاظ شدند  که با استفاده از SweetAlert انجام شده :
سناریوهای پوشش داده‌شده / قابل پوشش
•	401 (Unauthorized): توکن نامعتبر یا منقضی → نمایش پیام + انتقال به صفحه ورود
•	422 (Validation Error): خطای اعتبارسنجی ورودی‌ها → نمایش پیام دقیق خطا
•	404 (Not Found): مسیر اشتباه endpoint یا مسیر فایل‌ها → تشخیص با Network و اصلاح سریع
•	Network Error / Failed to fetch: مشکل اینترنت یا آدرس API اشتباه → بررسی DNS/URL و اصلاح Base URL
 
 
مرحله پنجم:
در این مرحله یک دامنه با ادرس sepideab82.ir  از سایت ایرنیک خریداری شد و در سایت آروان کلاد  بعد از ثبت نام در قسمتCDN اسم سرور ها را پیدا کرده و سپس در سایت ایرنیک، NS  های مربوطه را جای گذاری کرده تا مدیریت دامنه به ان جا انتقال داده شود.
 



مرحله ششم:
در این مرحله پس از ثبت نام در سایت لیارا،در قسمت پلتفرم میتوانیم یک برنامه جدید ایجاد کنیم و سپس چون کد ما با html,css ,js میباشد نوع برنامه را static  میگذاریم .در  فیلد شناسه برنامه نام دامنه خود را وارد میکنیم و یک شبکه خصوصی ایجاد میکنیم.
پس از انتخاب برنامه فایل Zip  کد را در انجا اپلود میکنیم و منتظر میمانیم که به سرور رایگان لیارا متصل شود. 
پس از اتصال در قسمت DNS سایت وارد شده و دامنه خود را اضافه میکنیم و منتظر میمانیم که دامنه و سرور به یکدیگر متصل شوند.
پس از ان وارد سایت اروان کلاد شده و سپس رکورد های مختلف را طبق لیارا وارد میکنیم و منتظر میمانیم که عملیات موفق شود.
و بعد از ان برای دامنه www اضافه میکنیم تا به درستی اجرا شود.















مرحله هفتم:
 برای انتقال پروژه از VSCode به GitHub (با تنظیم username/email)
1.	پیش‌نیاز و تنظیم اولیه Git (فقط یک‌بار)
ابتدا نصب بودن Git را چک کردم و نام و ایمیل را برای ثبت commitها تنظیم کردم:
git --version
git config --global user.name "Your Name"
git config --global user.email "you@example.com"
2.	آماده‌سازی پروژه
پروژه را در VSCode باز کردم (فولدر اصلی که package.json داخلش است) و فایل .gitignore ساختم تا مواردی مثل node_modules و dist آپلود نشوند.
3.	ساخت مخزن Git و ثبت نسخه اولیه
git init
git add .
git commit -m "Initial commit"
git branch -M main
4.	ساخت Repository در GitHub
در سایت GitHub یک Repository جدید ساختم (مثلاً havirkesht).
5.	اتصال پروژه لوکال به GitHub (Remote)
git remote add origin https://github.com/sepideabdollahi/havirkesht.git
اگر remote اشتباه باشد:
git remote set-url origin https://github.com/sepideabdollahi/havirkesht.git

6.	آپلود پروژه روی GitHub (Push)
git push --set-upstream origin main
7.	رفع خطای رایج (fetch first)
اگر GitHub از قبل commit داشته باشد و push رد شود:
git pull --rebase origin main
git push --set-upstream origin main
8.	آپلود تغییرات بعدی
git add -A
git commit -m "message"
git push










مرحله هشتم:
پس از راه اندازی سرور در لیارا ، در همان قسمت پایین گواهی ssl  مشاهده میشود و به راحتی میتوان ان را فعال کرد.
اگر به زیر دامنه www نیاز داشتیم در همان قسمت میتوانیم ان را دریافت کنیم که دو رکورد جدید داده میشود و به صورت خودکار به سامانه لیارا متصل میشود.و در ادامه میتوان برای این زیر دامنه نیز گواهی ssl  دریافت کنیم. در نهایت برای جلوگیری از مشکلات سئو ، در بخش تنظیمات زیر دامنه پیش فرض را غیرفعال میکنیم تا فقط برنامه از طریق دامنه اصلی در دسترس باشد.
 پس از ان ما با استفاده از دامنه خود میتوانیم به سایت هاویر کشت متصل شویم.










مرحله نهم:
قابلیت CI/CD یک روش اتوماتیک برای تست، ادغام و ارسال تغییرات در نرم‌افزار است که باعث بهبود کیفیت و تسریع فرآیند توسعه می‌شود. قابلیت CI (Continuous Integration) به شما کمک می‌کند تا از سلامت و یکپارچه بودن کدهای موجود در ریپازیتوری‌تان اطمینان داشته باشید و قابلیت CD (Continuous Delivery) این امکان را در اختیار شما قرار می‌دهد تا تغییرهای نرم‌افزاری را به‌سرعت به‌دست کاربران برسانید.
در واقع، اجرای تست‌ها و اطمینان از pass شدن آن‌ها در مرحله‌ی CI انجام می‌شود و در CD با هربار push کردن کدهایتان در ریپازیتوری‌های GitLab یا GitHub، برنامه‌ی شما در سرور نیز به‌روز می‌شود.
برای این منظور قطعه کدی که در سایت لیارا قرار دارد را در ریشه اصلی پروژه با نام .github/workflows/liara.yaml است را قرار میدهیم و سپس باید مقدار APP_NAME  را با شناسه‌ی برنامه‌ت در لیارا جایگزین کنیم. پس از شخصی‌سازی مقدار APP_NAME در فایل liara.yaml باید کلید دسترسی به API حساب‌مان را در بخش Secret تنظیمات ریپازیتوری GitHub اضافه کنیم.
برای این کار وارد تنظیمات ریپازیتوری میشویم و از منوی Secrets، روی گزینه‌ی Actions کلیک میکنیم. سپس برای تعریف یک Secret جدید، روی گزینه‌ی New repository secret کلیک میکنیم. نام این Secret را LIARA_API_TOKEN و مقدار آن را از صفحه‌ی کلید دسترسی به API کپی کرده و در بخش Value قرار داده و بر روی گزینه‌ی Add secret کلیک میکنیم .در آخر با push کردن فایل github/workflows/liara.yaml. در ریپازیتوری GitHub متوجه خواهیم شد که یک pipeline به‌صورت خودکار در تب Action ریپازیتوری مت اجرا شده است و  نیز می‌توانیم مراحل استقرار پروژه‌ی خود را در صفحه‌ی تاریخچه دنبال کنیم.
 








سپیده عبداللهی

